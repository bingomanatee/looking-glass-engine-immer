!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):(t=t||self).LGE=r()}(this,(function(){"use strict";function t(t){for(var r=arguments.length,e=Array(r>1?r-1:0),n=1;n<r;n++)e[n-1]=arguments[n];if("production"!==process.env.NODE_ENV){var o=R[t],i=o?"function"==typeof o?o.apply(null,e):o:"unknown error nr: "+t;throw Error("[Immer] "+i)}throw Error("[Immer] minified error nr: "+t+(e.length?" "+e.map((function(t){return"'"+t+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function r(t){return!!t&&!!t[U]}function e(t){return!!t&&(function(t){if(!t||"object"!=typeof t)return!1;var r=Object.getPrototypeOf(t);return!r||r===Object.prototype}(t)||Array.isArray(t)||!!t[L]||!!t.constructor[L]||u(t)||a(t))}function n(t,r,e){void 0===e&&(e=!1),0===o(t)?(e?Object.keys:$)(t).forEach((function(n){e&&"symbol"==typeof n||r(n,t[n],t)})):t.forEach((function(e,n){return r(n,e,t)}))}function o(t){var r=t[U];return r?r.i>3?r.i-4:r.i:Array.isArray(t)?1:u(t)?2:a(t)?3:0}function i(t,r){return 2===o(t)?t.has(r):Object.prototype.hasOwnProperty.call(t,r)}function s(t,r,e){var n=o(t);2===n?t.set(r,e):3===n?(t.delete(r),t.add(e)):t[r]=e}function u(t){return k&&t instanceof Map}function a(t){return F&&t instanceof Set}function c(t){return t.o||t.t}function f(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var r=H(t);delete r[U];for(var e=$(r),n=0;n<e.length;n++){var o=e[n],i=r[o];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(r[o]={configurable:!0,writable:!0,enumerable:i.enumerable,value:t[o]})}return Object.create(Object.getPrototypeOf(t),r)}function h(t,i){return void 0===i&&(i=!1),p(t)||r(t)||!e(t)?t:(o(t)>1&&(t.set=t.add=t.clear=t.delete=l),Object.freeze(t),i&&n(t,(function(t,r){return h(r,!0)}),!0),t)}function l(){t(2)}function p(t){return null==t||"object"!=typeof t||Object.isFrozen(t)}function v(r){var e=W[r];return e||t(18,r),e}function b(){return"production"===process.env.NODE_ENV||z||t(0),z}function y(t,r){r&&(v("Patches"),t.u=[],t.s=[],t.v=r)}function d(t){_(t),t.p.forEach(m),t.p=null}function _(t){t===z&&(z=t.l)}function g(t){return z={p:[],l:z,h:t,m:!0,_:0}}function m(t){var r=t[U];0===r.i||1===r.i?r.j():r.g=!0}function w(r,n){n._=n.p.length;var o=n.p[0],i=void 0!==r&&r!==o;return n.h.O||v("ES5").S(n,r,i),i?(o[U].P&&(d(n),t(4)),e(r)&&(r=E(n,r),n.l||O(n,r)),n.u&&v("Patches").M(o[U],r,n.u,n.s)):r=E(n,o,[]),d(n),n.u&&n.v(n.u,n.s),r!==C?r:void 0}function E(t,r,e){if(p(r))return r;var o=r[U];if(!o)return n(r,(function(n,i){return j(t,o,r,n,i,e)}),!0),r;if(o.A!==t)return r;if(!o.P)return O(t,o.t,!0),o.t;if(!o.I){o.I=!0,o.A._--;var i=4===o.i||5===o.i?o.o=f(o.k):o.o;n(3===o.i?new Set(i):i,(function(r,n){return j(t,o,i,r,n,e)})),O(t,i,!1),e&&t.u&&v("Patches").R(o,e,t.u,t.s)}return o.o}function j(n,o,u,a,c,f){if("production"!==process.env.NODE_ENV&&c===u&&t(5),r(c)){var h=E(n,c,f&&o&&3!==o.i&&!i(o.D,a)?f.concat(a):void 0);if(s(u,a,h),!r(h))return;n.m=!1}if(e(c)&&!p(c)){if(!n.h.N&&n._<1)return;E(n,c),o&&o.A.l||O(n,c)}}function O(t,r,e){void 0===e&&(e=!1),t.h.N&&t.m&&h(r,e)}function S(t,r){var e=t[U];return(e?c(e):t)[r]}function P(t,r){if(r in t)for(var e=Object.getPrototypeOf(t);e;){var n=Object.getOwnPropertyDescriptor(e,r);if(n)return n;e=Object.getPrototypeOf(e)}}function A(t){t.P||(t.P=!0,t.l&&A(t.l))}function x(t){t.o||(t.o=f(t.t))}function T(t,r,e){var n=u(r)?v("MapSet").T(r,e):a(r)?v("MapSet").F(r,e):t.O?function(t,r){var e=Array.isArray(t),n={i:e?1:0,A:r?r.A:b(),P:!1,I:!1,D:{},l:r,t:t,k:null,o:null,j:null,C:!1},o=n,i=B;e&&(o=[n],i=Y);var s=Proxy.revocable(o,i),u=s.revoke,a=s.proxy;return n.k=a,n.j=u,a}(r,e):v("ES5").J(r,e);return(e?e.A:b()).p.push(n),n}function D(i){return r(i)||t(22,i),function t(r){if(!e(r))return r;var i,u=r[U],a=o(r);if(u){if(!u.P&&(u.i<4||!v("ES5").K(u)))return u.t;u.I=!0,i=M(r,a),u.I=!1}else i=M(r,a);return n(i,(function(r,e){u&&function(t,r){return 2===o(t)?t.get(r):t[r]}(u.t,r)===e||s(i,r,t(e))})),3===a?new Set(i):i}(i)}function M(t,r){switch(r){case 2:return new Map(t);case 3:return Array.from(t)}return f(t)}var I,z,N="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),k="undefined"!=typeof Map,F="undefined"!=typeof Set,V="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,C=N?Symbol.for("immer-nothing"):((I={})["immer-nothing"]=!0,I),L=N?Symbol.for("immer-draftable"):"__$immer_draftable",U=N?Symbol.for("immer-state"):"__$immer_state",q="undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator",R={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(t){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+t},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(t){return"Cannot apply patch, path doesn't resolve: "+t},16:'Sets cannot have "replace" patches.',17:function(t){return"Unsupported patch operation: "+t},18:function(t){return"The plugin for '"+t+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+t+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(t){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+t+"'"},22:function(t){return"'current' expects a draft, got: "+t},23:function(t){return"'original' expects a draft, got: "+t}},$="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,H=Object.getOwnPropertyDescriptors||function(t){var r={};return $(t).forEach((function(e){r[e]=Object.getOwnPropertyDescriptor(t,e)})),r},W={},B={get:function(t,r){if(r===U)return t;var n=c(t);if(!i(n,r))return function(t,r,e){var n,o=P(r,e);return o?"value"in o?o.value:null===(n=o.get)||void 0===n?void 0:n.call(t.k):void 0}(t,n,r);var o=n[r];return t.I||!e(o)?o:o===S(t.t,r)?(x(t),t.o[r]=T(t.A.h,o,t)):o},has:function(t,r){return r in c(t)},ownKeys:function(t){return Reflect.ownKeys(c(t))},set:function(t,r,e){var n=P(c(t),r);if(null==n?void 0:n.set)return n.set.call(t.k,e),!0;if(!t.P){var o=S(c(t),r),s=null==o?void 0:o[U];if(s&&s.t===e)return t.o[r]=e,t.D[r]=!1,!0;if(function(t,r){return t===r?0!==t||1/t==1/r:t!=t&&r!=r}(e,o)&&(void 0!==e||i(t.t,r)))return!0;x(t),A(t)}return t.o[r]=e,t.D[r]=!0,!0},deleteProperty:function(t,r){return void 0!==S(t.t,r)||r in t.t?(t.D[r]=!1,x(t),A(t)):delete t.D[r],t.o&&delete t.o[r],!0},getOwnPropertyDescriptor:function(t,r){var e=c(t),n=Reflect.getOwnPropertyDescriptor(e,r);return n?{writable:!0,configurable:1!==t.i||"length"!==r,enumerable:n.enumerable,value:e[r]}:n},defineProperty:function(){t(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){t(12)}},Y={};n(B,(function(t,r){Y[t]=function(){return arguments[0]=arguments[0][0],r.apply(this,arguments)}})),Y.deleteProperty=function(r,e){return"production"!==process.env.NODE_ENV&&isNaN(parseInt(e))&&t(13),B.deleteProperty.call(this,r[0],e)},Y.set=function(r,e,n){return"production"!==process.env.NODE_ENV&&"length"!==e&&isNaN(parseInt(e))&&t(14),B.set.call(this,r[0],e,n,r[0])};var K=new(function(){function n(t){this.O=V,this.N=!0,"boolean"==typeof(null==t?void 0:t.useProxies)&&this.setUseProxies(t.useProxies),"boolean"==typeof(null==t?void 0:t.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),this.produce=this.produce.bind(this),this.produceWithPatches=this.produceWithPatches.bind(this)}var o=n.prototype;return o.produce=function(r,n,o){if("function"==typeof r&&"function"!=typeof n){var i=n;n=r;var s=this;return function(t){var r=this;void 0===t&&(t=i);for(var e=arguments.length,o=Array(e>1?e-1:0),u=1;u<e;u++)o[u-1]=arguments[u];return s.produce(t,(function(t){var e;return(e=n).call.apply(e,[r,t].concat(o))}))}}var u;if("function"!=typeof n&&t(6),void 0!==o&&"function"!=typeof o&&t(7),e(r)){var a=g(this),c=T(this,r,void 0),f=!0;try{u=n(c),f=!1}finally{f?d(a):_(a)}return"undefined"!=typeof Promise&&u instanceof Promise?u.then((function(t){return y(a,o),w(t,a)}),(function(t){throw d(a),t})):(y(a,o),w(u,a))}if(!r||"object"!=typeof r){if((u=n(r))===C)return;return void 0===u&&(u=r),this.N&&h(u,!0),u}t(21,r)},o.produceWithPatches=function(t,r){var e,n,o=this;return"function"==typeof t?function(r){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return o.produceWithPatches(r,(function(r){return t.apply(void 0,[r].concat(n))}))}:[this.produce(t,r,(function(t,r){e=t,n=r})),e,n]},o.createDraft=function(n){e(n)||t(8),r(n)&&(n=D(n));var o=g(this),i=T(this,n,void 0);return i[U].C=!0,_(o),i},o.finishDraft=function(r,e){var n=r&&r[U];"production"!==process.env.NODE_ENV&&(n&&n.C||t(9),n.I&&t(10));var o=n.A;return y(o,e),w(void 0,o)},o.setAutoFreeze=function(t){this.N=t},o.setUseProxies=function(r){r&&!V&&t(20),this.O=r},o.applyPatches=function(t,e){var n;for(n=e.length-1;n>=0;n--){var o=e[n];if(0===o.path.length&&"replace"===o.op){t=o.value;break}}var i=v("Patches").$;return r(t)?i(t,e):this.produce(t,(function(t){return i(t,e.slice(n+1))}))},n}()),G=K.produce,J=(K.produceWithPatches.bind(K),K.setAutoFreeze.bind(K),K.setUseProxies.bind(K),K.applyPatches.bind(K),K.createDraft.bind(K)),X=(K.finishDraft.bind(K),function(t,r){return(X=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(t,r)});
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */function Q(t,r){function e(){this.constructor=t}X(t,r),t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}function Z(t){return"function"==typeof t}var tt=!1,rt={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack;tt=t},get useDeprecatedSynchronousErrorHandling(){return tt}};function et(t){setTimeout((function(){throw t}),0)}var nt={closed:!0,next:function(t){},error:function(t){if(rt.useDeprecatedSynchronousErrorHandling)throw t;et(t)},complete:function(){}},ot=function(){return Array.isArray||function(t){return t&&"number"==typeof t.length}}();function it(t){return null!==t&&"object"==typeof t}var st=function(){function t(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(t,r){return r+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t}(),ut=function(){function t(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var r;if(!this.closed){var e=this._parentOrParents,n=this._ctorUnsubscribe,o=this._unsubscribe,i=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,e instanceof t)e.remove(this);else if(null!==e)for(var s=0;s<e.length;++s){e[s].remove(this)}if(Z(o)){n&&(this._unsubscribe=void 0);try{o.call(this)}catch(t){r=t instanceof st?at(t.errors):[t]}}if(ot(i)){s=-1;for(var u=i.length;++s<u;){var a=i[s];if(it(a))try{a.unsubscribe()}catch(t){r=r||[],t instanceof st?r=r.concat(at(t.errors)):r.push(t)}}}if(r)throw new st(r)}},t.prototype.add=function(r){var e=r;if(!r)return t.EMPTY;switch(typeof r){case"function":e=new t(r);case"object":if(e===this||e.closed||"function"!=typeof e.unsubscribe)return e;if(this.closed)return e.unsubscribe(),e;if(!(e instanceof t)){var n=e;(e=new t)._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+r+" added to Subscription.")}var o=e._parentOrParents;if(null===o)e._parentOrParents=this;else if(o instanceof t){if(o===this)return e;e._parentOrParents=[o,this]}else{if(-1!==o.indexOf(this))return e;o.push(this)}var i=this._subscriptions;return null===i?this._subscriptions=[e]:i.push(e),e},t.prototype.remove=function(t){var r=this._subscriptions;if(r){var e=r.indexOf(t);-1!==e&&r.splice(e,1)}},t.EMPTY=function(t){return t.closed=!0,t}(new t),t}();function at(t){return t.reduce((function(t,r){return t.concat(r instanceof st?r.errors:r)}),[])}var ct=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),ft=function(t){function r(e,n,o){var i=t.call(this)||this;switch(i.syncErrorValue=null,i.syncErrorThrown=!1,i.syncErrorThrowable=!1,i.isStopped=!1,arguments.length){case 0:i.destination=nt;break;case 1:if(!e){i.destination=nt;break}if("object"==typeof e){e instanceof r?(i.syncErrorThrowable=e.syncErrorThrowable,i.destination=e,e.add(i)):(i.syncErrorThrowable=!0,i.destination=new ht(i,e));break}default:i.syncErrorThrowable=!0,i.destination=new ht(i,e,n,o)}return i}return Q(r,t),r.prototype[ct]=function(){return this},r.create=function(t,e,n){var o=new r(t,e,n);return o.syncErrorThrowable=!1,o},r.prototype.next=function(t){this.isStopped||this._next(t)},r.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},r.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},r.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},r.prototype._next=function(t){this.destination.next(t)},r.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},r.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},r.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this},r}(ut),ht=function(t){function r(r,e,n,o){var i,s=t.call(this)||this;s._parentSubscriber=r;var u=s;return Z(e)?i=e:e&&(i=e.next,n=e.error,o=e.complete,e!==nt&&(Z((u=Object.create(e)).unsubscribe)&&s.add(u.unsubscribe.bind(u)),u.unsubscribe=s.unsubscribe.bind(s))),s._context=u,s._next=i,s._error=n,s._complete=o,s}return Q(r,t),r.prototype.next=function(t){if(!this.isStopped&&this._next){var r=this._parentSubscriber;rt.useDeprecatedSynchronousErrorHandling&&r.syncErrorThrowable?this.__tryOrSetError(r,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},r.prototype.error=function(t){if(!this.isStopped){var r=this._parentSubscriber,e=rt.useDeprecatedSynchronousErrorHandling;if(this._error)e&&r.syncErrorThrowable?(this.__tryOrSetError(r,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(r.syncErrorThrowable)e?(r.syncErrorValue=t,r.syncErrorThrown=!0):et(t),this.unsubscribe();else{if(this.unsubscribe(),e)throw t;et(t)}}},r.prototype.complete=function(){var t=this;if(!this.isStopped){var r=this._parentSubscriber;if(this._complete){var e=function(){return t._complete.call(t._context)};rt.useDeprecatedSynchronousErrorHandling&&r.syncErrorThrowable?(this.__tryOrSetError(r,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}},r.prototype.__tryOrUnsub=function(t,r){try{t.call(this._context,r)}catch(t){if(this.unsubscribe(),rt.useDeprecatedSynchronousErrorHandling)throw t;et(t)}},r.prototype.__tryOrSetError=function(t,r,e){if(!rt.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{r.call(this._context,e)}catch(r){return rt.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(et(r),!0)}return!1},r.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},r}(ft);var lt=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function pt(t){return t}function vt(t){return 0===t.length?pt:1===t.length?t[0]:function(r){return t.reduce((function(t,r){return r(t)}),r)}}var bt=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(r){var e=new t;return e.source=this,e.operator=r,e},t.prototype.subscribe=function(t,r,e){var n=this.operator,o=function(t,r,e){if(t){if(t instanceof ft)return t;if(t[ct])return t[ct]()}return t||r||e?new ft(t,r,e):new ft(nt)}(t,r,e);if(n?o.add(n.call(o,this.source)):o.add(this.source||rt.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),rt.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(r){rt.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=r),!function(t){for(;t;){var r=t,e=r.closed,n=r.destination,o=r.isStopped;if(e||o)return!1;t=n&&n instanceof ft?n:null}return!0}(t)?console.warn(r):t.error(r)}},t.prototype.forEach=function(t,r){var e=this;return new(r=yt(r))((function(r,n){var o;o=e.subscribe((function(r){try{t(r)}catch(t){n(t),o&&o.unsubscribe()}}),n,r)}))},t.prototype._subscribe=function(t){var r=this.source;return r&&r.subscribe(t)},t.prototype[lt]=function(){return this},t.prototype.pipe=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return 0===t.length?this:vt(t)(this)},t.prototype.toPromise=function(t){var r=this;return new(t=yt(t))((function(t,e){var n;r.subscribe((function(t){return n=t}),(function(t){return e(t)}),(function(){return t(n)}))}))},t.create=function(r){return new t(r)},t}();function yt(t){if(t||(t=Promise),!t)throw new Error("no Promise impl found");return t}var dt=function(){function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t}(),_t=function(t){function r(r,e){var n=t.call(this)||this;return n.subject=r,n.subscriber=e,n.closed=!1,n}return Q(r,t),r.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,r=t.observers;if(this.subject=null,r&&0!==r.length&&!t.isStopped&&!t.closed){var e=r.indexOf(this.subscriber);-1!==e&&r.splice(e,1)}}},r}(ut),gt=function(t){function r(r){var e=t.call(this,r)||this;return e.destination=r,e}return Q(r,t),r}(ft),mt=function(t){function r(){var r=t.call(this)||this;return r.observers=[],r.closed=!1,r.isStopped=!1,r.hasError=!1,r.thrownError=null,r}return Q(r,t),r.prototype[ct]=function(){return new gt(this)},r.prototype.lift=function(t){var r=new wt(this,this);return r.operator=t,r},r.prototype.next=function(t){if(this.closed)throw new dt;if(!this.isStopped)for(var r=this.observers,e=r.length,n=r.slice(),o=0;o<e;o++)n[o].next(t)},r.prototype.error=function(t){if(this.closed)throw new dt;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var r=this.observers,e=r.length,n=r.slice(),o=0;o<e;o++)n[o].error(t);this.observers.length=0},r.prototype.complete=function(){if(this.closed)throw new dt;this.isStopped=!0;for(var t=this.observers,r=t.length,e=t.slice(),n=0;n<r;n++)e[n].complete();this.observers.length=0},r.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},r.prototype._trySubscribe=function(r){if(this.closed)throw new dt;return t.prototype._trySubscribe.call(this,r)},r.prototype._subscribe=function(t){if(this.closed)throw new dt;return this.hasError?(t.error(this.thrownError),ut.EMPTY):this.isStopped?(t.complete(),ut.EMPTY):(this.observers.push(t),new _t(this,t))},r.prototype.asObservable=function(){var t=new bt;return t.source=this,t},r.create=function(t,r){return new wt(t,r)},r}(bt),wt=function(t){function r(r,e){var n=t.call(this)||this;return n.destination=r,n.source=e,n}return Q(r,t),r.prototype.next=function(t){var r=this.destination;r&&r.next&&r.next(t)},r.prototype.error=function(t){var r=this.destination;r&&r.error&&this.destination.error(t)},r.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},r.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):ut.EMPTY},r}(mt),Et=function(t){function r(r){var e=t.call(this)||this;return e._value=r,e}return Q(r,t),Object.defineProperty(r.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),r.prototype._subscribe=function(r){var e=t.prototype._subscribe.call(this,r);return e&&!e.closed&&r.next(this._value),e},r.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new dt;return this._value},r.prototype.next=function(r){t.prototype.next.call(this,this._value=r)},r}(mt);var jt=function(){function t(t,r){this.predicate=t,this.thisArg=r}return t.prototype.call=function(t,r){return r.subscribe(new Ot(t,this.predicate,this.thisArg))},t}(),Ot=function(t){function r(r,e,n){var o=t.call(this,r)||this;return o.predicate=e,o.thisArg=n,o.count=0,o}return Q(r,t),r.prototype._next=function(t){var r;try{r=this.predicate.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}r&&this.destination.next(t)},r}(ft);var St=function(){this.__data__=[],this.size=0};var Pt=function(t,r){return t===r||t!=t&&r!=r};var At=function(t,r){for(var e=t.length;e--;)if(Pt(t[e][0],r))return e;return-1},xt=Array.prototype.splice;var Tt=function(t){var r=this.__data__,e=At(r,t);return!(e<0)&&(e==r.length-1?r.pop():xt.call(r,e,1),--this.size,!0)};var Dt=function(t){var r=this.__data__,e=At(r,t);return e<0?void 0:r[e][1]};var Mt=function(t){return At(this.__data__,t)>-1};var It=function(t,r){var e=this.__data__,n=At(e,t);return n<0?(++this.size,e.push([t,r])):e[n][1]=r,this};function zt(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}zt.prototype.clear=St,zt.prototype.delete=Tt,zt.prototype.get=Dt,zt.prototype.has=Mt,zt.prototype.set=It;var Nt=zt;var kt=function(){this.__data__=new Nt,this.size=0};var Ft=function(t){var r=this.__data__,e=r.delete(t);return this.size=r.size,e};var Vt=function(t){return this.__data__.get(t)};var Ct=function(t){return this.__data__.has(t)},Lt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Ut(t,r){return t(r={exports:{}},r.exports),r.exports}var qt="object"==typeof Lt&&Lt&&Lt.Object===Object&&Lt,Rt="object"==typeof self&&self&&self.Object===Object&&self,$t=qt||Rt||Function("return this")(),Ht=$t.Symbol,Wt=Object.prototype,Bt=Wt.hasOwnProperty,Yt=Wt.toString,Kt=Ht?Ht.toStringTag:void 0;var Gt=function(t){var r=Bt.call(t,Kt),e=t[Kt];try{t[Kt]=void 0;var n=!0}catch(t){}var o=Yt.call(t);return n&&(r?t[Kt]=e:delete t[Kt]),o},Jt=Object.prototype.toString;var Xt=function(t){return Jt.call(t)},Qt="[object Null]",Zt="[object Undefined]",tr=Ht?Ht.toStringTag:void 0;var rr=function(t){return null==t?void 0===t?Zt:Qt:tr&&tr in Object(t)?Gt(t):Xt(t)};var er=function(t){var r=typeof t;return null!=t&&("object"==r||"function"==r)},nr="[object AsyncFunction]",or="[object Function]",ir="[object GeneratorFunction]",sr="[object Proxy]";var ur,ar=function(t){if(!er(t))return!1;var r=rr(t);return r==or||r==ir||r==nr||r==sr},cr=$t["__core-js_shared__"],fr=(ur=/[^.]+$/.exec(cr&&cr.keys&&cr.keys.IE_PROTO||""))?"Symbol(src)_1."+ur:"";var hr=function(t){return!!fr&&fr in t},lr=Function.prototype.toString;var pr=function(t){if(null!=t){try{return lr.call(t)}catch(t){}try{return t+""}catch(t){}}return""},vr=/^\[object .+?Constructor\]$/,br=Function.prototype,yr=Object.prototype,dr=br.toString,_r=yr.hasOwnProperty,gr=RegExp("^"+dr.call(_r).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var mr=function(t){return!(!er(t)||hr(t))&&(ar(t)?gr:vr).test(pr(t))};var wr=function(t,r){return null==t?void 0:t[r]};var Er=function(t,r){var e=wr(t,r);return mr(e)?e:void 0},jr=Er($t,"Map"),Or=Er(Object,"create");var Sr=function(){this.__data__=Or?Or(null):{},this.size=0};var Pr=function(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r},Ar="__lodash_hash_undefined__",xr=Object.prototype.hasOwnProperty;var Tr=function(t){var r=this.__data__;if(Or){var e=r[t];return e===Ar?void 0:e}return xr.call(r,t)?r[t]:void 0},Dr=Object.prototype.hasOwnProperty;var Mr=function(t){var r=this.__data__;return Or?void 0!==r[t]:Dr.call(r,t)},Ir="__lodash_hash_undefined__";var zr=function(t,r){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=Or&&void 0===r?Ir:r,this};function Nr(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}Nr.prototype.clear=Sr,Nr.prototype.delete=Pr,Nr.prototype.get=Tr,Nr.prototype.has=Mr,Nr.prototype.set=zr;var kr=Nr;var Fr=function(){this.size=0,this.__data__={hash:new kr,map:new(jr||Nt),string:new kr}};var Vr=function(t){var r=typeof t;return"string"==r||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==t:null===t};var Cr=function(t,r){var e=t.__data__;return Vr(r)?e["string"==typeof r?"string":"hash"]:e.map};var Lr=function(t){var r=Cr(this,t).delete(t);return this.size-=r?1:0,r};var Ur=function(t){return Cr(this,t).get(t)};var qr=function(t){return Cr(this,t).has(t)};var Rr=function(t,r){var e=Cr(this,t),n=e.size;return e.set(t,r),this.size+=e.size==n?0:1,this};function $r(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}$r.prototype.clear=Fr,$r.prototype.delete=Lr,$r.prototype.get=Ur,$r.prototype.has=qr,$r.prototype.set=Rr;var Hr=$r,Wr=200;var Br=function(t,r){var e=this.__data__;if(e instanceof Nt){var n=e.__data__;if(!jr||n.length<Wr-1)return n.push([t,r]),this.size=++e.size,this;e=this.__data__=new Hr(n)}return e.set(t,r),this.size=e.size,this};function Yr(t){var r=this.__data__=new Nt(t);this.size=r.size}Yr.prototype.clear=kt,Yr.prototype.delete=Ft,Yr.prototype.get=Vt,Yr.prototype.has=Ct,Yr.prototype.set=Br;var Kr=Yr,Gr="__lodash_hash_undefined__";var Jr=function(t){return this.__data__.set(t,Gr),this};var Xr=function(t){return this.__data__.has(t)};function Qr(t){var r=-1,e=null==t?0:t.length;for(this.__data__=new Hr;++r<e;)this.add(t[r])}Qr.prototype.add=Qr.prototype.push=Jr,Qr.prototype.has=Xr;var Zr=Qr;var te=function(t,r){for(var e=-1,n=null==t?0:t.length;++e<n;)if(r(t[e],e,t))return!0;return!1};var re=function(t,r){return t.has(r)},ee=1,ne=2;var oe=function(t,r,e,n,o,i){var s=e&ee,u=t.length,a=r.length;if(u!=a&&!(s&&a>u))return!1;var c=i.get(t);if(c&&i.get(r))return c==r;var f=-1,h=!0,l=e&ne?new Zr:void 0;for(i.set(t,r),i.set(r,t);++f<u;){var p=t[f],v=r[f];if(n)var b=s?n(v,p,f,r,t,i):n(p,v,f,t,r,i);if(void 0!==b){if(b)continue;h=!1;break}if(l){if(!te(r,(function(t,r){if(!re(l,r)&&(p===t||o(p,t,e,n,i)))return l.push(r)}))){h=!1;break}}else if(p!==v&&!o(p,v,e,n,i)){h=!1;break}}return i.delete(t),i.delete(r),h},ie=$t.Uint8Array;var se=function(t){var r=-1,e=Array(t.size);return t.forEach((function(t,n){e[++r]=[n,t]})),e};var ue=function(t){var r=-1,e=Array(t.size);return t.forEach((function(t){e[++r]=t})),e},ae=1,ce=2,fe="[object Boolean]",he="[object Date]",le="[object Error]",pe="[object Map]",ve="[object Number]",be="[object RegExp]",ye="[object Set]",de="[object String]",_e="[object Symbol]",ge="[object ArrayBuffer]",me="[object DataView]",we=Ht?Ht.prototype:void 0,Ee=we?we.valueOf:void 0;var je=function(t,r,e,n,o,i,s){switch(e){case me:if(t.byteLength!=r.byteLength||t.byteOffset!=r.byteOffset)return!1;t=t.buffer,r=r.buffer;case ge:return!(t.byteLength!=r.byteLength||!i(new ie(t),new ie(r)));case fe:case he:case ve:return Pt(+t,+r);case le:return t.name==r.name&&t.message==r.message;case be:case de:return t==r+"";case pe:var u=se;case ye:var a=n&ae;if(u||(u=ue),t.size!=r.size&&!a)return!1;var c=s.get(t);if(c)return c==r;n|=ce,s.set(t,r);var f=oe(u(t),u(r),n,o,i,s);return s.delete(t),f;case _e:if(Ee)return Ee.call(t)==Ee.call(r)}return!1};var Oe=function(t,r){for(var e=-1,n=r.length,o=t.length;++e<n;)t[o+e]=r[e];return t},Se=Array.isArray;var Pe=function(t,r,e){var n=r(t);return Se(t)?n:Oe(n,e(t))};var Ae=function(t,r){for(var e=-1,n=null==t?0:t.length,o=0,i=[];++e<n;){var s=t[e];r(s,e,t)&&(i[o++]=s)}return i};var xe=function(){return[]},Te=Object.prototype.propertyIsEnumerable,De=Object.getOwnPropertySymbols,Me=De?function(t){return null==t?[]:(t=Object(t),Ae(De(t),(function(r){return Te.call(t,r)})))}:xe;var Ie=function(t,r){for(var e=-1,n=Array(t);++e<t;)n[e]=r(e);return n};var ze=function(t){return null!=t&&"object"==typeof t},Ne="[object Arguments]";var ke=function(t){return ze(t)&&rr(t)==Ne},Fe=Object.prototype,Ve=Fe.hasOwnProperty,Ce=Fe.propertyIsEnumerable,Le=ke(function(){return arguments}())?ke:function(t){return ze(t)&&Ve.call(t,"callee")&&!Ce.call(t,"callee")};var Ue=function(){return!1},qe=Ut((function(t,r){var e=r&&!r.nodeType&&r,n=e&&t&&!t.nodeType&&t,o=n&&n.exports===e?$t.Buffer:void 0,i=(o?o.isBuffer:void 0)||Ue;t.exports=i})),Re=9007199254740991,$e=/^(?:0|[1-9]\d*)$/;var He=function(t,r){var e=typeof t;return!!(r=null==r?Re:r)&&("number"==e||"symbol"!=e&&$e.test(t))&&t>-1&&t%1==0&&t<r},We=9007199254740991;var Be=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=We},Ye={};Ye["[object Float32Array]"]=Ye["[object Float64Array]"]=Ye["[object Int8Array]"]=Ye["[object Int16Array]"]=Ye["[object Int32Array]"]=Ye["[object Uint8Array]"]=Ye["[object Uint8ClampedArray]"]=Ye["[object Uint16Array]"]=Ye["[object Uint32Array]"]=!0,Ye["[object Arguments]"]=Ye["[object Array]"]=Ye["[object ArrayBuffer]"]=Ye["[object Boolean]"]=Ye["[object DataView]"]=Ye["[object Date]"]=Ye["[object Error]"]=Ye["[object Function]"]=Ye["[object Map]"]=Ye["[object Number]"]=Ye["[object Object]"]=Ye["[object RegExp]"]=Ye["[object Set]"]=Ye["[object String]"]=Ye["[object WeakMap]"]=!1;var Ke=function(t){return ze(t)&&Be(t.length)&&!!Ye[rr(t)]};var Ge=function(t){return function(r){return t(r)}},Je=Ut((function(t,r){var e=r&&!r.nodeType&&r,n=e&&t&&!t.nodeType&&t,o=n&&n.exports===e&&qt.process,i=function(){try{var t=n&&n.require&&n.require("util").types;return t||o&&o.binding&&o.binding("util")}catch(t){}}();t.exports=i})),Xe=Je&&Je.isTypedArray,Qe=Xe?Ge(Xe):Ke,Ze=Object.prototype.hasOwnProperty;var tn=function(t,r){var e=Se(t),n=!e&&Le(t),o=!e&&!n&&qe(t),i=!e&&!n&&!o&&Qe(t),s=e||n||o||i,u=s?Ie(t.length,String):[],a=u.length;for(var c in t)!r&&!Ze.call(t,c)||s&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||He(c,a))||u.push(c);return u},rn=Object.prototype;var en=function(t){var r=t&&t.constructor;return t===("function"==typeof r&&r.prototype||rn)};var nn=function(t,r){return function(e){return t(r(e))}}(Object.keys,Object),on=Object.prototype.hasOwnProperty;var sn=function(t){if(!en(t))return nn(t);var r=[];for(var e in Object(t))on.call(t,e)&&"constructor"!=e&&r.push(e);return r};var un=function(t){return null!=t&&Be(t.length)&&!ar(t)};var an=function(t){return un(t)?tn(t):sn(t)};var cn=function(t){return Pe(t,an,Me)},fn=1,hn=Object.prototype.hasOwnProperty;var ln=function(t,r,e,n,o,i){var s=e&fn,u=cn(t),a=u.length;if(a!=cn(r).length&&!s)return!1;for(var c=a;c--;){var f=u[c];if(!(s?f in r:hn.call(r,f)))return!1}var h=i.get(t);if(h&&i.get(r))return h==r;var l=!0;i.set(t,r),i.set(r,t);for(var p=s;++c<a;){var v=t[f=u[c]],b=r[f];if(n)var y=s?n(b,v,f,r,t,i):n(v,b,f,t,r,i);if(!(void 0===y?v===b||o(v,b,e,n,i):y)){l=!1;break}p||(p="constructor"==f)}if(l&&!p){var d=t.constructor,_=r.constructor;d!=_&&"constructor"in t&&"constructor"in r&&!("function"==typeof d&&d instanceof d&&"function"==typeof _&&_ instanceof _)&&(l=!1)}return i.delete(t),i.delete(r),l},pn=Er($t,"DataView"),vn=Er($t,"Promise"),bn=Er($t,"Set"),yn=Er($t,"WeakMap"),dn=pr(pn),_n=pr(jr),gn=pr(vn),mn=pr(bn),wn=pr(yn),En=rr;(pn&&"[object DataView]"!=En(new pn(new ArrayBuffer(1)))||jr&&"[object Map]"!=En(new jr)||vn&&"[object Promise]"!=En(vn.resolve())||bn&&"[object Set]"!=En(new bn)||yn&&"[object WeakMap]"!=En(new yn))&&(En=function(t){var r=rr(t),e="[object Object]"==r?t.constructor:void 0,n=e?pr(e):"";if(n)switch(n){case dn:return"[object DataView]";case _n:return"[object Map]";case gn:return"[object Promise]";case mn:return"[object Set]";case wn:return"[object WeakMap]"}return r});var jn=En,On=1,Sn="[object Arguments]",Pn="[object Array]",An="[object Object]",xn=Object.prototype.hasOwnProperty;var Tn=function(t,r,e,n,o,i){var s=Se(t),u=Se(r),a=s?Pn:jn(t),c=u?Pn:jn(r),f=(a=a==Sn?An:a)==An,h=(c=c==Sn?An:c)==An,l=a==c;if(l&&qe(t)){if(!qe(r))return!1;s=!0,f=!1}if(l&&!f)return i||(i=new Kr),s||Qe(t)?oe(t,r,e,n,o,i):je(t,r,a,e,n,o,i);if(!(e&On)){var p=f&&xn.call(t,"__wrapped__"),v=h&&xn.call(r,"__wrapped__");if(p||v){var b=p?t.value():t,y=v?r.value():r;return i||(i=new Kr),o(b,y,e,n,i)}}return!!l&&(i||(i=new Kr),ln(t,r,e,n,o,i))};var Dn=function t(r,e,n,o,i){return r===e||(null==r||null==e||!ze(r)&&!ze(e)?r!=r&&e!=e:Tn(r,e,n,o,t,i))};var Mn=function(t,r){return Dn(t,r)},In="[object Symbol]";var zn=function(t){return"symbol"==typeof t||ze(t)&&rr(t)==In},Nn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,kn=/^\w*$/;var Fn=function(t,r){if(Se(t))return!1;var e=typeof t;return!("number"!=e&&"symbol"!=e&&"boolean"!=e&&null!=t&&!zn(t))||(kn.test(t)||!Nn.test(t)||null!=r&&t in Object(r))},Vn="Expected a function";function Cn(t,r){if("function"!=typeof t||null!=r&&"function"!=typeof r)throw new TypeError(Vn);var e=function(){var n=arguments,o=r?r.apply(this,n):n[0],i=e.cache;if(i.has(o))return i.get(o);var s=t.apply(this,n);return e.cache=i.set(o,s)||i,s};return e.cache=new(Cn.Cache||Hr),e}Cn.Cache=Hr;var Ln=Cn,Un=500;var qn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Rn=/\\(\\)?/g,$n=function(t){var r=Ln(t,(function(t){return e.size===Un&&e.clear(),t})),e=r.cache;return r}((function(t){var r=[];return 46===t.charCodeAt(0)&&r.push(""),t.replace(qn,(function(t,e,n,o){r.push(n?o.replace(Rn,"$1"):e||t)})),r}));var Hn=function(t,r){for(var e=-1,n=null==t?0:t.length,o=Array(n);++e<n;)o[e]=r(t[e],e,t);return o},Wn=1/0,Bn=Ht?Ht.prototype:void 0,Yn=Bn?Bn.toString:void 0;var Kn=function t(r){if("string"==typeof r)return r;if(Se(r))return Hn(r,t)+"";if(zn(r))return Yn?Yn.call(r):"";var e=r+"";return"0"==e&&1/r==-Wn?"-0":e};var Gn=function(t){return null==t?"":Kn(t)};var Jn=function(t,r){return Se(t)?t:Fn(t,r)?[t]:$n(Gn(t))},Xn=1/0;var Qn=function(t){if("string"==typeof t||zn(t))return t;var r=t+"";return"0"==r&&1/t==-Xn?"-0":r};var Zn=function(t,r){for(var e=0,n=(r=Jn(r,t)).length;null!=t&&e<n;)t=t[Qn(r[e++])];return e&&e==n?t:void 0};var to=function(t,r,e){var n=null==t?void 0:Zn(t,r);return void 0===n?e:n};const ro="E_COMMIT",eo="next",no=new Map([[eo,["E_INITIAL","E_FILTER","E_VALIDATE",ro,"E_COMPLETE"]],["A_ANY",["E_INITIAL",ro,"E_COMPLETE"]]]),oo=Symbol("ABSENT");var io=Object.freeze({__proto__:null,E_INITIAL:"E_INITIAL",E_FILTER:"E_FILTER",E_VALIDATE:"E_VALIDATE",E_COMMIT:ro,E_COMPLETE:"E_COMPLETE",A_NEXT:eo,A_ANY:"A_ANY",defaultEventTree:no,ABSENT:oo});class so{constructor(t=oo,r=oo,e=oo,n=oo){this[L]=!0,"object"==typeof t?this._initParams(t):this._initArgs(t,r,e,n),!Array.isArray(this.stages)&&this.stage&&"function"!=typeof this.stage&&(this.stages=[this.stage])}_initParams({name:t=oo,value:r=oo,stage:e=oo,stages:n=oo}){this._initArgs(t,r,e,n)}_initArgs(t,r,e,n){this.name=t,this.value=r,Array.isArray(e)?(this.stage=e[0],this.stages=e):(this.stage=e,this.stages=n)}get hasErrors(){return this._errors&&this._errors.length}get errors(){return Array.isArray(this._errors)?[...this._errors]:[]}error(t){return"string"==typeof t?this.error(new Error(t)):("object"==typeof t&&t!==this&&Object.assign(t,{event:this}),this._errors?Array.isArray(this._errors)?this._errors.push(t):this._error=[this._error,t]:this._errors=[t],this)}advance(){if(Array.isArray(this.stages)){if(this.stage===oo)return this.stage=this.stages[0],this;if(-1===this.index)throw Object.assign(new Error("broadcast has invalid stage:"),{target:this});return this.isComplete||(this.stage=this.stages[this.index+1]),this}return this.error(new Error("cannot advance an broadcast without an array of stages"))}get index(){return this.stages.indexOf(this.stage)}get isComplete(){return!!this.hasErrors||!this.stages[this.index+1]}complete(){if(!this.isComplete){if(!Array.isArray(this.stages))return this.error(new Error("attempted to complete an broadcast without an array of stages"));this.stage=[...this.stages].pop()}return this}matches(t,r=!1){return!!(r||t instanceof so)&&(this.nameMatches(t,r)&&this.stageMatches(t,r)&&this.valueMatches(t,r))}_matches(t,r,e){if(this[r]===oo)return!0;if(t instanceof so)return this._matches(to(t,r),r);if(e){const e=to(t,r,oo);if(e!==oo)return this._matches(t,e)}return this[r]===t}valueMatches(t,r){return this._matches(t,"value",r)}stageMatches(t,r){return this._matches(t,"stage",r)}nameMatches(t,r){return this._matches(t,"name",r)}}so[L]=!0,so.compare=(t,r)=>!(!t||!r||!t&&!r)&&(t instanceof so?t.matches(r):r instanceof so?r.matches(t):t.name===r.name&&t.stage===r.stage&&Mn(t.value,r.value));class uo extends so{_matches(t,r,e){if(this[r]===oo)return!0;if(t instanceof uo)return console.error("comparing two EventFilters",this,t),!1;if(t instanceof so)return this._matches(to(t,r,oo),r);if(e){const e=to(t,r,oo);if(e!==oo)return this._matches(e,r)}return"function"==typeof this[r]?this[r](t,this):super._matches(t,r,e)}valueMatches(t,r){return this._matches(t,"value",r)}stageMatches(t,r){return this._matches(t,"stage",r)}nameMatches(t,r){return this._matches(t,"name",r)}matches(t,r){return this.nameMatches(t,r)&&this.stageMatches(t,r)&&this.valueMatches(t,r)}_equals(t,r,e){if(t instanceof uo)return console.error("comparing two EventFilters",this,t),!1;if(t instanceof so)return this._equals(to(t,r,oo),r);if(e){if(to(t,r,oo)!==oo)return this._equals(supProp,r)}return"function"==typeof this[r]?this[r](t,this):super._equals(t,r,e)}valueEquals(t,r){return this._equals(t,"value",r)}stageEquals(t,r){return this._equals(t,"stage",r)}nameEquals(t,r){return this._equals(t,"name",r)}equals(t,r){return this.nameEquals(t,r)&&this.stageEquals(t,r)&&this.valueEquals(t,r)}}uo[L]=!0,so.EventFilter=uo;const ao=new so.EventFilter({name:eo,stage:ro});return function(){function r(t,r){function e(){this.constructor=t}u(t,r),t.prototype=(e.prototype=r.prototype,new e)}function o(t){t.o||(t.D=new Map,t.o=new Map(t.t))}function i(t){t.o||(t.o=new Set,t.t.forEach((function(r){if(e(r)){var n=T(t.A.h,r,t);t.p.set(r,n),t.o.add(n)}else t.o.add(r)})))}function s(r){r.g&&t(3,JSON.stringify(c(r)))}var u=function(t,r){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(t,r)},a=function(){function t(t,r){return this[U]={i:2,l:r,A:r?r.A:b(),P:!1,I:!1,o:void 0,D:void 0,t:t,k:this,C:!1,g:!1},this}r(t,Map);var i=t.prototype;return Object.defineProperty(i,"size",{get:function(){return c(this[U]).size}}),i.has=function(t){return c(this[U]).has(t)},i.set=function(t,r){var e=this[U];return s(e),c(e).has(t)&&c(e).get(t)===r||(o(e),A(e),e.D.set(t,!0),e.o.set(t,r),e.D.set(t,!0)),this},i.delete=function(t){if(!this.has(t))return!1;var r=this[U];return s(r),o(r),A(r),r.D.set(t,!1),r.o.delete(t),!0},i.clear=function(){var t=this[U];s(t),c(t).size&&(o(t),A(t),t.D=new Map,n(t.t,(function(r){t.D.set(r,!1)})),t.o.clear())},i.forEach=function(t,r){var e=this;c(this[U]).forEach((function(n,o){t.call(r,e.get(o),o,e)}))},i.get=function(t){var r=this[U];s(r);var n=c(r).get(t);if(r.I||!e(n))return n;if(n!==r.t.get(t))return n;var i=T(r.A.h,n,r);return o(r),r.o.set(t,i),i},i.keys=function(){return c(this[U]).keys()},i.values=function(){var t,r=this,e=this.keys();return(t={})[q]=function(){return r.values()},t.next=function(){var t=e.next();return t.done?t:{done:!1,value:r.get(t.value)}},t},i.entries=function(){var t,r=this,e=this.keys();return(t={})[q]=function(){return r.entries()},t.next=function(){var t=e.next();if(t.done)return t;var n=r.get(t.value);return{done:!1,value:[t.value,n]}},t},i[q]=function(){return this.entries()},t}(),f=function(){function t(t,r){return this[U]={i:3,l:r,A:r?r.A:b(),P:!1,I:!1,o:void 0,t:t,k:this,p:new Map,g:!1,C:!1},this}r(t,Set);var e=t.prototype;return Object.defineProperty(e,"size",{get:function(){return c(this[U]).size}}),e.has=function(t){var r=this[U];return s(r),r.o?!!r.o.has(t)||!(!r.p.has(t)||!r.o.has(r.p.get(t))):r.t.has(t)},e.add=function(t){var r=this[U];return s(r),this.has(t)||(i(r),A(r),r.o.add(t)),this},e.delete=function(t){if(!this.has(t))return!1;var r=this[U];return s(r),i(r),A(r),r.o.delete(t)||!!r.p.has(t)&&r.o.delete(r.p.get(t))},e.clear=function(){var t=this[U];s(t),c(t).size&&(i(t),A(t),t.o.clear())},e.values=function(){var t=this[U];return s(t),i(t),t.o.values()},e.entries=function(){var t=this[U];return s(t),i(t),t.o.entries()},e.keys=function(){return this.values()},e[q]=function(){return this.values()},e.forEach=function(t,r){for(var e=this.values(),n=e.next();!n.done;)t.call(r,n.value,n.value,this),n=e.next()},t}();!function(t,r){W[t]||(W[t]=r)}("MapSet",{T:function(t,r){return new a(t,r)},F:function(t,r){return new f(t,r)}})}(),{...io,Event:so,ValueStream:class{constructor(t,r={}){this._valueSubject=new Et(J([t])),this._eventTree=new Map(no),this._eventStream=new mt;const{filter:e,name:n}=r;"function"==typeof e&&(this.filter=e),this.name=n,this._watchEvents()}_watchEvents(){var t,r;this._eventStream.pipe((t=t=>t&&!t.isError&&ao.matches(t),function(e){return e.lift(new jt(t,r))})).subscribe(t=>{t.isComplete&&!t.isError&&this._updateValue(t.value)})}_updateValue(t){this._valueSubject.next(G(this._valueSubject.value,r=>{r[0]=t}))}next(t){G(this._valueSubject.value,r=>{r[0]=t});this._eventStream.next(new so(eo,t,ro,[ro]))}get value(){return this._valueSubject.value[0]}}}}));
